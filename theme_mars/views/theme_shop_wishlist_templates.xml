<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!--    wishlist layout-->
    <template id="my_wishlist" name="Show My Wishlist"
              inherit_id="website_sale_wishlist.product_wishlist"
              customize_show="True">
        <xpath expr="//div[@id='wrap']" position="before">
            <section class="banner_services banner_shop">
                <div class="wrapper">
                    <div class="content title">
                        <h2>Wishlist</h2>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb ">
                                <li class="breadcrumb-item">
                                    <a href="/">
                                        Home
                                        <i class="arrow right"/>
                                    </a>
                                </li>
                                <li class="breadcrumb-item">
                                    <a href="/shop">
                                        Shop
                                        <i class="arrow right"/>
                                    </a>
                                </li>
                                <li class="breadcrumb-item">
                                    <a href="/shop/wishlist">Wishlist</a>
                                </li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </section>
        </xpath>
        <xpath expr="//section[hasclass('wishlist-section')]"
               position="replace">
            <section class="shop_cart container wishlist-section">
                <div class="wrapper">
                    <div class="container">
                        <div class="cart_table">
                            <table class="table table-striped table-responsive-sm table-comparator"
                                   id="o_comparelist_table">
                                <thead>
                                    <tr>
                                        <th scope="col">Product</th>
                                        <th scope="col">Description</th>
                                        <th scope="col">Unit Price</th>
                                        <th scope="col"/>
                                    </tr>
                                </thead>
                                <tbody t-name="wishlist_body">
                                    <t t-foreach="wishes" t-as="wish">
                                        <t t-set="combination_info"
                                           t-value="wish.product_id._get_combination_info_variant()"/>
                                        <tr t-name="wishlist_table"
                                            t-att-data-wish-id="wish.id"
                                            t-att-data-product-id="wish.product_id.id"
                                            t-att-data-product-tracking-info="json.dumps(request.env['product.template'].get_google_analytics_data(combination_info))">
                                            <td class="td-img text-start align-middle">
                                                <div class="product_img">
                                                    <button type="button"
                                                            class="btn btn-link o_wish_rm no-decoration">
                                                        <i class="bi bi-x"/>
                                                    </button>
                                                    <a t-att-href="wish.product_id.website_url">
                                                        <img t-attf-src="/web/image/product.product/#{wish.product_id.id}/image_128"
                                                             class="img img-fluid"
                                                             style="margin:10px;margin-top:0px;"
                                                             alt="Product image"/>
                                                    </a>
                                                    <span class=""
                                                          style="margin-left: 20px;">
                                                        <a t-att-href="wish.product_id.website_url"
                                                           style="font-size: 0.8rem;">
                                                            <t t-esc="wish.product_id.display_name"/>
                                                        </a>
                                                    </span>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="description"
                                                     style="max-width:500px;">
                                                    <p style="margin-top: 10px;"
                                                       t-field="wish.product_id.description_sale"
                                                       class="text-muted"/>
                                                </div>
                                            </td>
                                            <td class="wishlist_price">
                                                <p class="rate"
                                                   style="margin-top: 15px;">
                                                    <t t-esc="combination_info['price']"
                                                       t-options="{'widget': 'monetary', 'display_currency': website.pricelist_id.currency_id}"/>
                                                    <small t-if="combination_info['base_unit_price']"
                                                           class="cart_product_base_unit_price d-block text-muted"
                                                           groups="website_sale.group_show_uom_price">
                                                        <t t-call="website_sale.base_unit_price">
                                                            <t t-set="product"
                                                               t-value="wish.product_id"/>
                                                        </t>
                                                    </small>
                                                </p>
                                            </td>
                                            <td class="text-center td-wish-btn align-middle">
                                                <input name="product_id"
                                                       t-att-value="wish.product_id.id"
                                                       type="hidden"/>
                                                <a t-if="combination_info['prevent_zero_price_sale']"
                                                   t-att-href="website.contact_us_button_url"
                                                   class="btn btn-primary btn_cta">
                                                    Contact Us
                                                </a>
                                                <a id="add_to_cart_button"
                                                   t-else=""
                                                   class="wishlist-to-cart o_wish_add">
                                                    <i class="bi bi-cart-fill"/>
                                                </a>
                                            </td>
                                        </tr>
                                    </t>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
            <section class="shop_cart d-none">
                <div class="wrapper">
                    <div class="container">
                        <div class="cart_empty">
                            <div class="cart_heading text-center">
                                <h1>Your Wishlist is currently empty.</h1>
                                <a href="/shop/" class="btn btn-primary ">Return
                                    to Shop
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </xpath>
    </template>
</odoo>
